sudo: required

language: c

services:
  - docker

cache:
  directories:
    - `pwd`/MoxieLogic
  before_cache:
    - pwd
    - find `pwd`/MoxieLogic

before_install:
  - if ! test -d MoxieLogic; then mkdir MoxieLogic; fi
  - pwd
  - ls -ld MoxieLogic
  - ls -l MoxieLogic
  - find MoxieLogic -type f
  - docker build -f Dockerfile -t atgreen/moxielogic-repos .
  - docker run --rm -t -i -v `pwd`:/usr/local atgreen/moxielogic-repos /root/build.sh
  - find MoxieLogic -type f

script:
  -

after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
      docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
      docker push atgreen/moxielogic-repos;
    fi

